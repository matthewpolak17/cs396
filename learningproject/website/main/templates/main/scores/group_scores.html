{% extends 'main/base.html' %}

{% block title %}Group Scores{% endblock %}
{% load crispy_forms_tags %}

{% block content %}
<div style="width:50%; margin:auto"><br>
<h3>Group scores page</h3>
<p>**Displays the grades for each subject</p>
<form method="get" action="">
    <label for="order">Order</label>
    <select name="order">
        <option value="" disabled selected>Select</option>
        <option value="desc">Descending</option>
        <option value="asc">Ascending</option>
        <option value="high">Highest</option>
        <option value="low">Lowest</option>
        <option value="average">Average</option>
    </select>
    <button type="submit">Sort</button>
</form>
{% if avg %}
    {% for item in avg %}
        <p style="font-weight:bold">{{item.subject.title}}</p>
        <p>Average: {{item.average}}</p>
    {% endfor %}
{% else %}
    {% for item in dic %}
        <p style="font-weight:bold">{{item.subject.title}}</p>
        {% if item.grades.count == 0 %}
            <p>No attempts yet</p>
        {% else %}
            {% for grade in item.grades %}
                <p>{{grade.student}} | {{grade.score}}</p>
            {% endfor %}
        {% endif %}
        <hr>
    {% endfor %}
{% endif %}
</div>

{% endblock %}